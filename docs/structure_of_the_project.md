# Структура проекта

Ниже приведены правила и рекомендуемая иерархия каталогов для вашего проекта. Все файлы, скрипты и модули должны размещаться строго по своему назначению.

## 1. Общая иерархия каталогов

`project-root/ # Корень проекта ├── config/ # Конфигурации и переменные окружения │ ├── .env.example # Шаблон переменных окружения │ └── settings.yml # Основные настройки (YAML) │ ├── src/ # Исходный код приложения │ ├── backend/ # FastAPI, Flask или др. │ ├── frontend/ # React/Next.js │ ├── bot/ # Telegram-бот (Python/Node.js) │ └── plugin/ # Claude desktop plugin │ ├── scripts/ # Утилиты и автоматизация │ ├── sync/ # Синхронизация (rclone, syncthing) │ ├── ingest/ # Пайплайн: извлечение и нормализация │ ├── embed/ # Запуск встраивания векторов │ └── backup/ # Резервные копии на NAS │ ├── data/ # Данные проекта │ ├── raw/ # Исходные документы │ │ ├── local/ # Локальные файлы (Mac, iMac) │ │ ├── nas/ # Копия с NAS │ │ ├── yandex/ # Синхрон с Yandex Disk │ │ └── google/ # Синхрон с Google Drive │ │ │ ├── processed/ # Текстовые дампы, разбивки на чанки │ └── embeddings/ # Сырые векторы и кэш │ ├── backups/ # Архивы и снимки (nightly) │ └── <YYYY-MM-DD>/ # Дата-папка с .tar.gz, .qdrant │ ├── logs/ # Лог-файлы всех сервисов │ ├── sync.log # Синхронизация │ ├── ingest.log # Ингест │ ├── embed.log # Встраивание │ └── api.log # REST API/боты │ ├── tests/ # Юнит и интеграционные тесты │ ├── backend/ # Тесты API │ ├── bot/ # Тесты бота │ └── scripts/ # Тесты утилит │ ├── notebooks/ # Jupyter-блокноты для анализа и отладки │ └── docs/ # Документация проекта ├── architecture.md # Архитектура и компоненты ├── user-guide.md # Инструкция по установке и использованию └── api-reference.md # Описание REST API`

## 2. Правила именования

*   Каталоги: **snake_case** или **kebab-case**, всегда строчные.
*   Скрипты: `<purpose>_<action>.py` или `.sh` (например, `sync_yandex.sh`, `embed_vectors.py`).
*   Конфиги: `.yml`/`.yaml` или `.json`, шаблоны с суффиксом `.example`.
*   Файлы окружения: `.env` (игнорировать в Git), шаблон `.env.example`.
*   Логи: `<module>.log`.
*   Тесты: той же структуры, что и исходники, с префиксом `test_`.

## 3. Назначение ключевых директорий

1.  **config/**

    *   Хранит параметры подключения (API-ключи, пути, настройки сервисов).
    *   Настройки разбиты по средам (`development`, `production`).

2.  **src/**

    *   Модули приложения: backend, frontend, бот, плагин.
    *   Код должен быть модульным, каждый компонент в собственном подкаталоге.

3.  **scripts/**

    *   Автоматизация: синхронизация, запуск пайплайна, backup.
    *   Скрипты должны быть автономными, принимать аргументы командной строки.

4.  **data/raw/**

    *   Сырьё: Office/PDF файлы из всех источников.
    *   Разделено по источнику для удобства аудита и очистки.

5.  **data/processed/**

    *   Текстовые версии документов (.txt или .json), разбивки на чанки.
    *   Используется ingestion pipeline.

6.  **data/embeddings/**

    *   Хранение векторов и метаданных для Qdrant.
    *   Кэш для повторных вызовов API.

7.  **backups/**

    *   Полные снимки данных и векторной БД.
    *   Каждая папка с датой, архивируется и шифруется.

8.  **logs/**

    *   Единственное место для всех логов.
    *   Чёткое разделение по компонентам.

9.  **tests/**

    *   Автоматические проверки целостности и функциональности.
    *   Структура зеркальна `src/` и `scripts/`.

10. **docs/**

    *   Вся текстовая документация проекта.
    *   Обязательно хранить версионно (Git).

## 4. Процесс добавления новых файлов

1.  Поместите новые документы в `data/raw/<source>/`.
2.  Скрипт `scripts/ingest/run_ingest.sh` обрабатывает файлы, кладёт результат в `data/processed/`.
3.  Скрипт `scripts/embed/run_embed.sh` формирует векторы и сохраняет их в `data/embeddings/`.
4.  Логи операций пишутся в `logs/`.
5.  По завершении данных этапе обновляются резервные копии через `scripts/backup/`.

**Эти правила помогут поддерживать порядок и воспроизводимость проекта как на локальной машине, так и на сервере.**
